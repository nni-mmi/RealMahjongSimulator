import random

# ===============================
# ãƒ‡ãƒãƒƒã‚°å‡ºåŠ›ãƒ©ãƒƒãƒ‘ãƒ¼
# ===============================
class Logger:
    def __init__(self, enabled=True):
        self.enabled = enabled

    def log(self, *args, **kwargs):
        if self.enabled:
            formatted_args = []
            for arg in args:
                if isinstance(arg, list):
                    formatted_args.append(", ".join(str(a) for a in arg))
                elif isinstance(arg, dict):
                    formatted_args.append(", ".join(f"{k}:{v}" for k, v in arg.items()))
                else:
                    formatted_args.append(str(arg))
            print(*formatted_args, **kwargs)

logger = Logger(enabled=True)

# ===============================
# éº»é›€å“ã®åº§æ¨™å®šç¾©
# ===============================
sides = {"A": (1,0), "B": (0,-1), "C": (-1,0), "D": (0,1)}

# ç”»é¢åº§æ¨™ç³»ã«åˆã‚ã›ãŸæ™‚è¨ˆå›ã‚Šãƒ»åæ™‚è¨ˆå›ã‚Š
clockwise_order = ["A", "D", "C", "B"]
counter_clockwise_order = ["A", "B", "C", "D"]

def next_clockwise(side):
    idx = clockwise_order.index(side)
    return clockwise_order[(idx + 1) % 4]

def next_counter_clockwise(side):
    idx = counter_clockwise_order.index(side)
    return counter_clockwise_order[(idx + 1) % 4]

# ===============================
# ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¯ãƒ©ã‚¹
# ===============================
kana_chars = list("ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³ã‚¬ã‚®ã‚°ã‚²ã‚´ã‚¶ã‚¸ã‚ºã‚¼ã‚¾ãƒ€ãƒ‚ãƒ…ãƒ‡ãƒ‰ãƒãƒ“ãƒ–ãƒ™ãƒœãƒ‘ãƒ”ãƒ—ãƒšãƒ")

class Player:
    def __init__(self, name, type_="CPU"):
        self.name = name
        self.type = type_
        self.initial_wind = None  # ä»®ã§å¼•ã„ãŸé¢¨ç‰Œ
        self.seat = None          # A/B/C/D
        self.wind = None          # æ±å—è¥¿åŒ—ï¼ˆæœ€çµ‚çš„ãªå®¶ï¼‰
        self.is_kariton = False
        self.is_parent = False
        self.wall = None          # Wallã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

    def __repr__(self):
        return f"{self.name}({self.type}, seat={self.seat}, wind={self.wind})"

def generate_player_name():
    return "".join(random.choices(kana_chars, k=2))

def create_players():
    players = [Player(generate_player_name()) for _ in range(3)]
    players.append(Player("ã‚ãªãŸ", type_="Human"))
    random.shuffle(players)
    return players

# ===============================
# ä»®æ±ï¼ˆkaritonï¼‰æ±ºå®šå‡¦ç†
# ===============================
wind_tiles = ["æ±", "å—", "è¥¿", "åŒ—"]

def decide_kariton(players):
    mixer = random.choice(players)

    drawn_winds = random.sample(wind_tiles, 4)
    for player, wind in zip(players, drawn_winds):
        player.initial_wind = wind

    east_player = next(p for p in players if p.initial_wind == "æ±")
    east_side = random.choice(["A", "B", "C", "D"])
    east_player.seat = east_side
    east_player.is_kariton = True
    kariton_order = {east_side: east_player}

    # ä»®æ±ã‚’èµ·ç‚¹ã«åæ™‚è¨ˆå›ã‚Šã§å—ãƒ»è¥¿ãƒ»åŒ—ã‚’é…ç½®
    current_side = east_side
    for wind in ["å—", "è¥¿", "åŒ—"]:
        current_side = next_counter_clockwise(current_side)
        player = next(p for p in players if p.initial_wind == wind)
        player.seat = current_side
        kariton_order[current_side] = player

    return kariton_order, mixer

# ===============================
# ã‚µã‚¤ã‚³ãƒ­åˆ¤å®šå‡¦ç†
# ===============================
def roll_dice():
    return random.randint(1,6), random.randint(1,6)

def get_target_player_by_total(roller_side, total):
    """ã‚µã‚¤ã‚³ãƒ­åˆè¨ˆå€¤ã‹ã‚‰å¯¾è±¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¾ºã‚’è¿”ã™"""
    move_table = {
        (5,9): 0,
        (2,6,10): 1,
        (3,7,11): 2,
        (4,8,12): 3
    }

    steps = None
    for nums, step in move_table.items():
        if total in nums:
            steps = step
            break

    # åæ™‚è¨ˆå›ã‚Šã®é †ã«å¾“ã£ã¦å¯¾è±¡è€…ã‚’æ±ºå®š
    idx = counter_clockwise_order.index(roller_side)
    target_side = counter_clockwise_order[(idx + steps) % 4]
    return target_side

def roll_and_get_target(roller_name, roller_side):
    """ã‚µã‚¤ã‚³ãƒ­ã‚’1å›æŒ¯ã‚Šã€å¯¾è±¡ã®è¾ºã¨åˆè¨ˆå€¤ã¨ãƒ€ã‚¤ã‚¹ãã‚Œãã‚Œã®å€¤ã‚’è¿”ã™ï¼ˆç´”ç²‹ãªæ‰‹ç¶šãã®å…±é€šåŒ–ï¼‰"""
    die1, die2 = roll_dice()
    total = die1 + die2
    target_side = get_target_player_by_total(roller_side, total)
    return target_side, total, die1, die2

# ===============================
# ä»®è¦ªæ±ºå®šå‡¦ç†
# ===============================
def decide_temp_parent(kariton_order):
    """æ‰‹é †1: ä»®æ±ãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ã¦ä»®è¦ªã‚’æ±ºå®š
       - ä»®æ±ãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚Šã€ä»®è¦ªã‚’æ±ºã‚ã‚‹
       - ã‚µã‚¤ã‚³ãƒ­ã®åˆè¨ˆå€¤ã§ä»®è¦ªã‚’æ±ºå®šã—ã€ãã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¾ºã‚’æ±ºã‚ã‚‹
    """
    east_side = next(side for side, p in kariton_order.items() if p.initial_wind == "æ±")
    target_side, total, die1, die2 = roll_and_get_target(east_side, east_side)  # ã‚µã‚¤ãƒ‰ã ã‘æ¸¡ã™
    return east_side, target_side, total, die1, die2 

# ===============================
# è¦ªæ±ºå®šå‡¦ç†
# ===============================
def decide_real_parent(kariton_order, temp_parent_side):
    """æ‰‹é †2: ä»®è¦ªãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ã¦æœ¬å½“ã®è¦ªã‚’æ±ºå®š"""
    temp_parent = kariton_order[temp_parent_side]
    target_side, total, die1, die2 = roll_and_get_target(temp_parent.seat, temp_parent.seat)
    real_parent = kariton_order[target_side]
    real_parent.is_parent = True
    return target_side, real_parent, total, die1, die2 

# ===============================
# è¦ªæ±ºå®šå¾Œã®åº§å¸­å‰²ã‚Šæ›´æ–°
# ===============================
def assign_seats_after_parent_decided(kariton_order, real_parent_side):
    """è¦ªæ±ºå®šå¾Œã«åº§å¸­å‰²ã‚Šã‚’æ›´æ–°"""
    real_parent = kariton_order[real_parent_side]
    real_parent.wind = "æ±"  # è¦ªã‚’æ±å®¶ã«å¤‰æ›´

    # åæ™‚è¨ˆå›ã‚Šã§æ®‹ã‚Šã®é¢¨ã‚’å‰²ã‚Šå½“ã¦ã‚‹
    remaining_winds = ["å—", "è¥¿", "åŒ—"]
    sides_order = counter_clockwise_order
    idx = sides_order.index(real_parent_side)
    for wind in remaining_winds:
        idx = (idx + 1) % 4
        side = sides_order[idx]
        player = kariton_order[side]
        player.wind = wind

    return kariton_order

# ===============================
# ä½¿ç”¨éº»é›€ç‰Œã®å®šç¾©ï¼ˆåŸºæœ¬çš„ã«å¤‰æ›´ç¦æ­¢ï¼šæ–¹é‡ã‚„å‰æãŒãƒ–ãƒ¬ã‚‹ç‚ºï¼‰
# ===============================
tiles = "ğŸ€‡,ğŸ€‡,ğŸ€‡,ğŸ€‡,ğŸ€ˆ,ğŸ€ˆ,ğŸ€ˆ,ğŸ€ˆ,ğŸ€‰,ğŸ€‰,ğŸ€‰,ğŸ€‰,ğŸ€Š,ğŸ€Š,ğŸ€Š,ğŸ€Š,ğŸ€¢èµ¤5m,ğŸ€‹,ğŸ€‹,ğŸ€‹,ğŸ€Œ,ğŸ€Œ,ğŸ€Œ,ğŸ€Œ,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€™,ğŸ€™,ğŸ€™,ğŸ€™,ğŸ€š,ğŸ€š,ğŸ€š,ğŸ€š,ğŸ€›,ğŸ€›,ğŸ€›,ğŸ€›,ğŸ€œ,ğŸ€œ,ğŸ€œ,ğŸ€œ,ğŸ€£èµ¤5p,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€Ÿ,ğŸ€Ÿ,ğŸ€Ÿ,ğŸ€Ÿ,ğŸ€ ,ğŸ€ ,ğŸ€ ,ğŸ€ ,ğŸ€¡,ğŸ€¡,ğŸ€¡,ğŸ€¡,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€‘,ğŸ€‘,ğŸ€‘,ğŸ€‘,ğŸ€’,ğŸ€’,ğŸ€’,ğŸ€’,ğŸ€“,ğŸ€“,ğŸ€“,ğŸ€“,ğŸ€¤èµ¤5s,ğŸ€”,ğŸ€”,ğŸ€”,ğŸ€•,ğŸ€•,ğŸ€•,ğŸ€•,ğŸ€–,ğŸ€–,ğŸ€–,ğŸ€–,ğŸ€—,ğŸ€—,ğŸ€—,ğŸ€—,ğŸ€˜,ğŸ€˜,ğŸ€˜,ğŸ€˜,ğŸ€€,ğŸ€€,ğŸ€€,ğŸ€€,ğŸ€,ğŸ€,ğŸ€,ğŸ€,ğŸ€‚,ğŸ€‚,ğŸ€‚,ğŸ€‚,ğŸ€ƒ,ğŸ€ƒ,ğŸ€ƒ,ğŸ€ƒ,ğŸ€†,ğŸ€†,ğŸ€†,ğŸ€†,ğŸ€…,ğŸ€…,ğŸ€…,ğŸ€…,ğŸ€„,ğŸ€„,ğŸ€„,ğŸ€„"

meaning = {
    "ğŸ€‡": "1m", "ğŸ€ˆ": "2m", "ğŸ€‰": "3m", "ğŸ€Š": "4m",
    "ğŸ€‹": "5m", "ğŸ€Œ": "6m", "ğŸ€": "7m", "ğŸ€": "8m", "ğŸ€": "9m",
    "ğŸ€¢èµ¤5m": "5mRed",

    "ğŸ€™": "1p", "ğŸ€š": "2p", "ğŸ€›": "3p", "ğŸ€œ": "4p",
    "ğŸ€": "5p", "ğŸ€": "6p", "ğŸ€Ÿ": "7p", "ğŸ€ ": "8p", "ğŸ€¡": "9p",
    "ğŸ€£èµ¤5p": "5pRed",

    "ğŸ€": "1s", "ğŸ€‘": "2s", "ğŸ€’": "3s", "ğŸ€“": "4s",
    "ğŸ€”": "5s", "ğŸ€•": "6s", "ğŸ€–": "7s", "ğŸ€—": "8s", "ğŸ€˜": "9s",
    "ğŸ€¤èµ¤5s": "5sRed",

    "ğŸ€€": "ton", "ğŸ€": "nan", "ğŸ€‚": "sha", "ğŸ€ƒ": "pei",
    "ğŸ€†": "haku", "ğŸ€…": "hatsu", "ğŸ€„": "chun"
}

# ===============================
# ç‰Œã‚’æ··ãœã¦å£ç‰Œã‚’ä½œã‚‹
# ===============================
class Wall:
    def __init__(self):
        self.columns = []  # [[ä¸Š,ä¸‹], ...]

    def add_column(self, upper, lower):
        self.columns.append([upper, lower])

    def upper_row(self):
        return [col[0] for col in self.columns]

    def lower_row(self):
        return [col[1] for col in self.columns]

def shuffle_tiles():
    """ç‰Œã‚’æ··ãœã¦ãƒªã‚¹ãƒˆã§è¿”ã™"""
    tile_list = [t.strip() for t in tiles.split(",")]
    random.shuffle(tile_list)
    return tile_list

def build_walls(tile_list, kariton_order):
    """ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã”ã¨ã®å£ç‰Œï¼ˆ17åˆ—Ã—2è¡Œï¼‰ã‚’ä½œæˆ"""
    for side, player in kariton_order.items():
        wall = Wall()
        for _ in range(17):
            upper = tile_list.pop(0)
            lower = tile_list.pop(0)
            wall.add_column(upper, lower)
        player.wall = wall

    return {side: player.wall for side, player in kariton_order.items()}

# ===============================
# é–‹é–€ï¼åˆ‡ã‚Šå±±ã®ä½ç½®æ±ºå®š
# ===============================
def kaimen(parent: Player, kariton_order: dict):
    """
    è¦ªãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã£ã¦é–‹é–€ä½ç½®ã‚’æ±ºã‚ã‚‹
    1. ã‚µã‚¤ã‚³ãƒ­å‡ºç›®ã§å¯¾è±¡è€…ï¼ˆè¾ºï¼‰ã‚’æ±ºå®š
    2. ãã®äººã®å£ç‰Œã®å³ã‹ã‚‰å‡ºç›®åˆ—ç›®ã§åˆ†é›¢
    """
    parent_side = parent.seat

    target_side, total, die1, die2 = roll_and_get_target(parent.name, parent_side)
    target_player = kariton_order[target_side]

    wall = target_player.wall
    split_index = max(0, len(wall.columns)-total)
    left_columns = wall.columns[:split_index]
    right_columns = wall.columns[split_index:]

    return target_player, left_columns, right_columns, total, die1, die2

# ===============================
# è¡¨ç¤ºã®èª¿æ•´ã€€UIï¼ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤
# ===============================
# ãƒ­ã‚°ã‚’ä¿®é£¾ã™ã‚‹
def log_title(title):
    logger.log(f"\nâ”€â”€â”€ {title} â”€â”€â”€")

# é¢¨ã®ä¸¦ã³ç•ª
wind_order = ["æ±", "å—", "è¥¿", "åŒ—"]

# ã€Œå¼•ã„ãŸé¢¨ç‰Œã€ã‚’é¢¨ã®ä¸¦ã³é †ã«ã‚½ãƒ¼ãƒˆè¡¨ç¤º
def show_drawn_winds(players):
    log_title("å„ã€…ãŒå¼•ã„ãŸé¢¨ç‰Œ")
    sorted_players = sorted(players, key=lambda p: wind_order.index(p.initial_wind))
    logger.log(", ".join(f"{p.name}:{p.initial_wind}" for p in sorted_players))

# å¸­è¡¨ç¤ºãƒ»å ´é¢¨è¡¨ç¤ºã‚’é¢¨ã®ä¸¦ã³é †ã«ã‚½ãƒ¼ãƒˆè¡¨ç¤º
def show_seating_by_wind(kariton_order):
    sorted_items = sorted(
        kariton_order.items(),
        key=lambda item: wind_order.index(item[1].wind)
    )
    for side, player in sorted_items:
        logger.log(f"{side} {player.name} ({player.wind})")

# å¸­è¡¨ç¤ºãƒ»å ´é¢¨è¡¨ç¤ºã‚’åˆæœŸé¢¨ã®ä¸¦ã³é †ã«ã‚½ãƒ¼ãƒˆè¡¨ç¤º
def show_seating_by_initial_wind(kariton_order):
    sorted_items = sorted(
        kariton_order.items(),
        key=lambda item: wind_order.index(item[1].initial_wind)
    )
    for side, player in sorted_items:
        logger.log(f"{side} {player.name} ({player.initial_wind})")

# ã‚µã‚¤ã‚³ãƒ­æ¼”å‡º
def show_dice(roller_name, die1, die2):
    logger.log(f"â”€â”€â”€ {roller_name} ãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚Šã¾ã—ãŸâ€¦â€¦")
    logger.log(f"               {die1}ã€{die2} ï¼ å‡ºç›®åˆè¨ˆ {die1 + die2} â”€â”€â”€")

# æ´—ç‰Œã¨ã„ã†èªã¨shuffle_tiles()ã‚’å¯¾å¿œã•ã›ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼
def shipai():
    log_title("æ´—ç‰Œ")
    shipai_tiles = shuffle_tiles()
    logger.log(", ".join(shipai_tiles))
    return shipai_tiles

# ç Œç‰Œã¨ã„ã†èªã¨build_walls()ã‚’å¯¾å¿œã•ã›ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼
def chipai(tile_list, kariton_order):
    log_title("ç Œç‰Œ")
    return build_walls(tile_list, kariton_order)

# å£ç‰Œè¡¨ç¤ºã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
def show_wall(player):
    logger.log(f"ã€{player.wind}å®¶ã€€{player.name}ï¼ˆ{player.seat}å¸­ï¼‰ã®å£ç‰Œã€‘")
    logger.log("ä¸Šæ®µï¼š" + ", ".join(player.wall.upper_row()))
    logger.log("ä¸‹æ®µï¼š" + ", ".join(player.wall.lower_row()))

# å…¨å“¡åˆ†ã®å£ç‰Œã‚’é¢¨ã®ä¸¦ã³é †ã§è¡¨ç¤º
def show_all_walls(kariton_order):
    for wind in wind_order:
        for side, player in kariton_order.items():
            if player.wind == wind:
                show_wall(player)

# é–‹é–€è¡¨ç¤º
def show_kaimen_wall(player, total):
    log_title("é–‹é–€")
    idx = len(player.wall.columns) - total

    upper = player.wall.upper_row()
    lower = player.wall.lower_row()

    upper.insert(idx, "   é–‹é–€ä½ç½®   ")
    lower.insert(idx, "   é–‹é–€ä½ç½®   ")

    logger.log(f"ã€{player.wind}å®¶ã€€{player.name}ï¼ˆ{player.seat}å¸­ï¼‰ã®å£ç‰Œã€‘")
    logger.log("ä¸Šæ®µï¼š" + ", ".join(upper))
    logger.log("ä¸‹æ®µï¼š" + ", ".join(lower))

# ã‚µã‚¤ã‚³ãƒ­ã®å‡ºç›®çµæœã‚’ä¸€åº¦ã ã‘è¨˜éŒ²ã™ã‚‹
def log_dice(roll_purpose, roller_name, die1, die2, result_message):
    logger.log(f"\nâ”€â”€â”€ {roll_purpose} ã®ç‚ºã« {roller_name} ãŒã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚Šã¾ã—ãŸâ€¦â€¦")
    logger.log(f"{die1}ã€{die2} ï¼ å‡ºç›®åˆè¨ˆ {die1 + die2}")
    logger.log(result_message)

# è¡¨ç¤ºã¨å‡¦ç†ã‚’åˆ†ã‘ã‚‹ã®åŸå‰‡ã®ç‚ºã®ãã®ä¸¡æ–¹ã®å‘¼ã³å‡ºã—
def show_logic():
    # ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”Ÿæˆ
    players = create_players()
    log_title("ä»Šå›ã®å‚æˆ¦ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼")
    logger.log(", ".join(p.name for p in players))

    # ä»®æ±æ±ºå®š
    kariton_order, mixer = decide_kariton(players)

    log_title("é¢¨ç‰Œã‚’æ··ãœã‚‹åèª‰ã‚ã‚‹äºº")
    logger.log(mixer.name)

    show_drawn_winds(players)

    # ä»®æ±è¡¨ç¤º
    kariton = next(p for p in players if p.is_kariton)
    log_title("ä»®æ±ãŠã‚ˆã³ä»®æ±ãŒä»Šã„ã‚‹å¸­ã¯")
    logger.log(f"{kariton.name}ã€€{kariton.seat}")

    logger.log(f"ä»®æ± {kariton.name} ã®å¸­ {kariton.seat} ã«èµ·å®¶ãƒãƒ¼ã‚¯ã‚’ä»®ç½®ãã—ã¾ã™")

    log_title("ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ç‰Œã«å¾“ã£ã¦ç€å¸­ãã ã•ã„")
    show_seating_by_initial_wind(kariton_order)

    # ä»®è¦ªæ±ºå®š
    east_side, temp_target_side, temp_total, temp_d1, temp_d2 = decide_temp_parent(
        kariton_order
    )

    east_player = kariton_order[east_side]
    temp_parent = kariton_order[temp_target_side]

    log_dice("ä»®è¦ªæ±ºå®š", f"ä»®æ± {east_player.name}", temp_d1, temp_d2,
        f"ã‚µã‚¤ã‚³ãƒ­åˆ¤å®šã§ä»®è¦ªã¯ {temp_parent.name} (å¸­ {temp_target_side})")

    # è¦ªæ±ºå®š
    real_parent_side, real_parent, real_total, real_d1, real_d2 = decide_real_parent(
        kariton_order, temp_target_side
    )

    log_dice(f"è¦ªæ±ºå®š", f"ä»®è¦ª {temp_parent.name}", real_d1, real_d2,
        f"ã‚µã‚¤ã‚³ãƒ­åˆ¤å®šã§è¦ªã¯ {real_parent.name} (å¸­ {real_parent_side})" + "\n" +
        f"è¦ª {real_parent.name} ã®å¸­ {real_parent_side} ã«èµ·å®¶ãƒãƒ¼ã‚¯ã‚’ç½®ãã¾ã™")

    # å¸­ãƒ»å ´é¢¨ç¢ºå®š
    kariton_order = assign_seats_after_parent_decided(
        kariton_order, real_parent_side
    )

    log_title("å ´é¢¨ã¯ä»¥ä¸‹ã®æ§˜ã«æ±ºå®šã•ã‚Œã¾ã—ãŸ")
    show_seating_by_wind(kariton_order)

    logger.log(
        f"è¦ª {real_parent.name} ã®å¸­ {real_parent_side} ã«èµ·å®¶ãƒãƒ¼ã‚¯ã‚’ç½®ãã¾ã™"
    )

    # æ´—ç‰Œ
    tiles = shipai()

    # ç Œç‰Œ
    chipai(tiles, kariton_order)

    # å£ç‰Œè¡¨ç¤ºï¼ˆæ±å—è¥¿åŒ—é †ï¼‰
    show_all_walls(kariton_order)

    # é–‹é–€
    target_player, _, _, total, kaimen_d1, kaimen_d2 = kaimen(real_parent, kariton_order)

    log_dice(f"é–‹é–€", real_parent.name, kaimen_d1, kaimen_d2,
        f"é–‹é–€ã™ã‚‹å£ç‰Œã¯ {target_player.wind}å®¶ {target_player.name}ï¼ˆ{target_player.seat}å¸­ï¼‰" + 
        "\n" + f"é–‹é–€ä½ç½®ã¯ å³ã‹ã‚‰{total}åˆ—ç›®ã§ã™")

    show_kaimen_wall(target_player, total)

# ===============================
# ãƒ¡ã‚¤ãƒ³å‡¦ç†
# ===============================
if __name__ == "__main__":
    show_logic()



